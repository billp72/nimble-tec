$(function(a){requested=function(e){var t="object"==typeof e?1:e,n=this,p=a(this).val(),l=p.length>0?p:"0";a.post("/admin-search-results",{primary:l,page:t},function(e){a(".results").remove(),a("#myDropdown").append('<a class="results">'+e.count+" results</a>"),a("a").click(function(){a("tbody").empty(),a.each(e.results,(s,e)=>{a("tbody").append(a("<tr>").append(a("<td>").append('<input name="box-'+s+'" class="all" type="checkbox"value="'+e.tel+'" />'),a('<td class="column-'+s+'">').append(e.firstName),a('<td class="column-'+s+'">').append(e.primary),a('<td class="column-'+s+'">').append(e.secondary||"N/A"),a('<td class="column-'+s+'">').append(e.hobby||"N/A"),a('<td class="column-'+s+'">').append(e.about.trunc(50,!0)+"&nbsp;(<span onclick=\"seefull('"+e.about+'\')" class="linkColor">see full</span>)'),a('<td class="column-'+s+'">').append(e.distance+" mi"),a('<td class="column-'+s+'">').append(e.tel)))})}),0===e.count&&a(".results").remove(),s(e.pages,e.currentPage,n)})},a("#search-bar").keyup(a.debounce(250,requested)),a("#toggleCheckboxes").click(function(){for(var a=Array.prototype.slice.call(document.getElementsByClassName("all")),s=a.length,e=0;e<s;e++)a[e].checked=this.checked}),a("#dialog").dialog({autoOpen:!1}),a("#submitform").click(function(){for(var s={sms:[]},e=a("input:checkbox:checked","#myTable").map(function(s,e){return a(this).val()}).get(),t=0;t<e.length;t++)s.sms.push({tel:e[t]});return s.textmessage=a("#textmessage").val(),s.sms[0]&&s.sms[0].tel&&s.textmessage?a.ajax({type:"POST",url:"/submit-sms",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",success:function(s){a("#dialog").html(s),a("#dialog").dialog("open")}}):alert("you must select a row and fill out the message box"),!1});var s=function(s,e,t){(e=parseInt(e,10))<s&&1===e&&a(".pagination").html("<span>"+e+'</span><a id="currentPage"></a>&nbsp;of&nbsp;<span>'+s+'</span><a id="totalPages"> > </a>'),e===s&&s>1&&a(".pagination").html('<a id="currentPage"> < </a>&nbsp;of&nbsp;<span>'+e+"</span>&nbsp;&nbsp;<span>"+s+"</span>&nbsp;pages"),e<s&&e>1&&a(".pagination").html('<a id="currentPage"> < </a>&nbsp;of&nbsp;<span>'+e+"</span>&nbsp;&nbsp;<span>"+s+'</span><a id="totalPages"> > </a>'),e===s&&1===s&&a(".pagination").html("<span>"+e+"</span>&nbsp;of&nbsp;<span>"+s+"</span>&nbsp;pages"),a(".pagination").on("click",function(a){e!==s&&("currentPage"===a.target.id?e++:"totalPages"===a.target.id&&e--,requested.call(t,e))})};String.prototype.trunc=function(a,s){if(this.length<=a)return this;var e=this.substr(0,a-1);return(s?e.substr(0,e.lastIndexOf(" ")):e)+"&hellip;"}}(jQuery));