$(function(s){requested=function(a){var n="object"==typeof a?1:a,t=this,p=s(this).val(),r=p.length>0?p:"0";s.post("/admin-search-results",{primary:r,page:n},function(a){s(".results").remove(),s("#myDropdown").append('<a class="results">'+a.count+" results</a>"),s("a").click(function(){s("tbody").empty(),s.each(a.results,(e,a)=>{s("tbody").append(s("<tr>").append(s("<td>").append('<input name="box-'+e+'" class="all" type="checkbox"value="'+a.tel+'" />'),s('<td class="row-'+e+'">').append(a.firstName),s('<td class="row-'+e+'">').append(a.primary),s('<td class="row-'+e+'">').append(a.secondary||"N/A"),s('<td class="row-'+e+'">').append(a.hobby||"N/A"),s('<td class="row-'+e+'">').append(a.about.trunc(50,!0)+"&nbsp;(<span onclick=\"seefull('"+a.about+'\')" class="linkColor">see full</span>)'),s('<td class="row-'+e+'">').append(1==a.experience?a.experience+" year":a.experience+" years"),s('<td class="row-'+e+'">').append(a.distance+" mi"),s('<td class="row-'+e+'">').append(a.tel)))})}),0===a.count&&s(".results").remove(),e(a.pages,a.currentPage,t)})},s("#search-bar").keyup(s.debounce(250,requested)),s("#toggleCheckboxes").click(function(){for(var s=Array.prototype.slice.call(document.getElementsByClassName("all")),e=s.length,a=0;a<e;a++)s[a].checked=this.checked}),s("#dialog").dialog({autoOpen:!1}),s("#submitform").click(function(){for(var e={sms:[]},a=s("input:checkbox:checked","#myTable").map(function(e,a){return s(this).val()}).get(),n=0;n<a.length;n++)e.sms.push({tel:a[n]});return e.textmessage=s("#textmessage").val(),e.sms[0]&&e.sms[0].tel&&e.textmessage?s.ajax({type:"POST",url:"/submit-sms",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(e){s("#dialog").html(e),s("#dialog").dialog("open")}}):alert("you must select a row and fill out the message box"),!1});var e=function(e,a,n){(a=parseInt(a,10))<e&&1===a&&s(".pagination").html("<span>"+a+'</span><a class="currentPage"></a>&nbsp;of&nbsp;<span>'+e+'</span>&nbsp;&nbsp;<a href="" class="totalPages"> > </a>'),a===e&&e>1&&s(".pagination").html('<a href="" class="currentPage"> < </a>&nbsp;&nbsp;<span>'+a+"</span>&nbsp;&nbsp;of&nbsp;&nbsp;<span>"+e+"</span>&nbsp;&nbsp;pages"),a<e&&a>1&&s(".pagination").html('<a href="" class="currentPage"> < </a>&nbsp;&nbsp;<span>'+a+"</span>&nbsp;&nbsp;of&nbsp;&nbsp;<span>"+e+'</span>&nbsp;&nbsp;<a href="" class="totalPages"> > </a>'),a===e&&1===e&&s(".pagination").html("<span>"+a+"</span>&nbsp;of&nbsp;<span>"+e+"</span>&nbsp;pages"),s(".pagination").on("click",function(s){a!==e&&("currentPage"===s.target.id?a++:"totalPages"===s.target.id&&a--,requested.call(n,a))})};String.prototype.trunc=function(s,e){if(this.length<=s)return this;var a=this.substr(0,s-1);return(e?a.substr(0,a.lastIndexOf(" ")):a)+"&hellip;"}}(jQuery));