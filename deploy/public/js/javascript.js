$(function(s){requested=function(e){var n="object"==typeof e?1:e,t=this,p=s(this).val(),l=p.length>0?p:"0";s.post("/admin-search-results",{primary:l,page:n},function(e){s(".results").remove(),s("#myDropdown").append('<a class="results">'+e.count+" results</a>"),s("a").click(function(){s("tbody").empty(),s.each(e.results,(a,e)=>{s("tbody").append(s("<tr>").append(s("<td>").append('<input name="box-'+a+'" class="all" type="checkbox"value="'+e.tel+'" />'),s('<td class="row-'+a+'">').append(e.firstName),s('<td class="row-'+a+'">').append(e.primary),s('<td class="row-'+a+'">').append(e.secondary||"N/A"),s('<td class="row-'+a+'">').append(e.hobby||"N/A"),s('<td class="row-'+a+'">').append(e.about.trunc(50,!0)+"&nbsp;(<span onclick=\"seefull('"+e.about+'\')" class="linkColor">see full</span>)'),s('<td class="row-'+a+'">').append(e.distance+" mi"),s('<td class="row-'+a+'">').append(e.tel)))})}),0===e.count&&s(".results").remove(),a(e.pages,e.currentPage,t)})},s("#search-bar").keyup(s.debounce(250,requested)),s("#toggleCheckboxes").click(function(){for(var s=Array.prototype.slice.call(document.getElementsByClassName("all")),a=s.length,e=0;e<a;e++)s[e].checked=this.checked}),s("#dialog").dialog({autoOpen:!1}),s("#submitform").click(function(){for(var a={sms:[]},e=s("input:checkbox:checked","#myTable").map(function(a,e){return s(this).val()}).get(),n=0;n<e.length;n++)a.sms.push({tel:e[n]});return a.textmessage=s("#textmessage").val(),a.sms[0]&&a.sms[0].tel&&a.textmessage?s.ajax({type:"POST",url:"/submit-sms",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",success:function(a){s("#dialog").html(a),s("#dialog").dialog("open")}}):alert("you must select a row and fill out the message box"),!1});var a=function(a,e,n){(e=parseInt(e,10))<a&&1===e&&s(".pagination").html("<span>"+e+'</span><a class="currentPage"></a>&nbsp;of&nbsp;<span>'+a+'</span>&nbsp;&nbsp;<a href="" class="totalPages"> > </a>'),e===a&&a>1&&s(".pagination").html('<a href="" class="currentPage"> < </a>&nbsp;&nbsp;<span>'+e+"</span>&nbsp;&nbsp;of&nbsp;&nbsp;<span>"+a+"</span>&nbsp;&nbsp;pages"),e<a&&e>1&&s(".pagination").html('<a href="" class="currentPage"> < </a>&nbsp;&nbsp;<span>'+e+"</span>&nbsp;&nbsp;of&nbsp;&nbsp;<span>"+a+'</span>&nbsp;&nbsp;<a href="" class="totalPages"> > </a>'),e===a&&1===a&&s(".pagination").html("<span>"+e+"</span>&nbsp;of&nbsp;<span>"+a+"</span>&nbsp;pages"),s(".pagination").on("click",function(s){e!==a&&("currentPage"===s.target.id?e++:"totalPages"===s.target.id&&e--,requested.call(n,e))})};String.prototype.trunc=function(s,a){if(this.length<=s)return this;var e=this.substr(0,s-1);return(a?e.substr(0,e.lastIndexOf(" ")):e)+"&hellip;"}}(jQuery));